<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>水墨暈染轉場模擬 - 本地測試版</title>
    <!-- 載入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* 使用 'Inter' 字體，確保中文字體也能優雅顯示 */
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            overflow: hidden; /* 防止滾動條 */
        }

        /* 圖片容器的基礎樣式 */
        #image-container {
            width: 100vw;
            height: 100vh;
            /* 圖片淡入淡出效果：用於新圖片出現時的淡入 */
            transition: opacity 0.8s ease-out, background-image 0.8s ease-out; 
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative; /* 為了讓標題相對定位 */
        }

        /* 轉場黑幕 (模擬水墨暈染覆蓋螢幕的黑色部分) */
        #transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-color: #000; /* 模擬墨水全覆蓋時的顏色 */
            opacity: 0; /* 預設為隱藏 */
            pointer-events: none; 
            z-index: 100;
            /* 墨水暈開/散去的時間，設置為快速 */
            transition: opacity 0.3s cubic-bezier(0.8, 0, 1, 0.8); 
        }
        
        /* H1 標題樣式 */
        #image-container h1 {
            text-shadow: 0 4px 10px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 255, 255, 0.1);
            animation: fadeInScale 1s ease-out forwards;
        }
        
        /* H1 進入動畫 */
        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        /* 選單連結樣式 */
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            transition: background-color 0.3s, transform 0.2s;
        }
        .nav-link:hover {
            background-color: rgba(255, 255, 255, 0.3); /* 懸停時增加透明度 */
            transform: translateY(-1px);
        }

        /* 品牌名稱懸停效果 */
        .logo-text {
            transition: color 0.3s;
        }
        .logo-text:hover {
            color: #ccc;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- 頂部導航選單 (Navigation Bar) - 增加更深的模糊效果和圓潤邊框 -->
    <header class="fixed top-0 w-full z-50 p-6">
        <nav class="flex justify-between items-center max-w-7xl mx-auto text-white">
            <!-- Logo / 品牌名稱 -->
            <div class="text-3xl font-extrabold tracking-widest cursor-pointer drop-shadow-lg logo-text">
                墨韻 (Mò Yùn)
            </div>

            <!-- 選單項目 - 增加更深的模糊和圓潤外框 -->
            <ul class="flex space-x-4 backdrop-blur-md bg-black/40 p-2 rounded-[30px] shadow-2xl border border-white/20">
                <li><a href="#" class="nav-link font-semibold">首頁</a></li>
                <li><a href="#" class="nav-link font-semibold">關於我們</a></li>
                <li><a href="#" class="nav-link font-semibold">作品集</a></li>
                <li><a href="#" class="nav-link font-semibold">聯絡我們</a></li>
            </ul>
        </nav>
    </header>

    <!-- 圖片容器 - 改為使用本地相對路徑進行測試 -->
    <!-- 注意：您必須在 index.html 旁邊建立一個名為 'images' 的資料夾，並放入 'image_1.jpg' -->
    <div id="image-container" style="background-image: url('./images/image_1.jpg');">
        <h1 class="text-white text-7xl font-black">本地測試圖 一</h1>
    </div>

    <!-- 轉場黑幕 (模擬墨水覆蓋層) -->
    <div id="transition-overlay"></div>

    <!-- 互動按鈕 - 使用漸層背景和更強的陰影 -->
    <div class="fixed bottom-10 left-1/2 transform -translate-x-1/2 z-50">
        <button id="next-image-btn" class="
            transition-button 
            bg-gradient-to-r from-gray-700 to-gray-900 
            text-white font-extrabold 
            py-4 px-10 rounded-full 
            shadow-xl hover:shadow-2xl 
            focus:outline-none focus:ring-4 focus:ring-white/50
            tracking-wider
        ">
            切換下一景 (優雅轉場)
        </button>
    </div>

    <script>
        // Firebase 相關變數（此應用程式不需要，但依規範保留結構）
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const apiKey = ""; // LLM API Key Placeholder

        // 圖片清單 (修改為本地相對路徑，請確保這些圖片檔案存在於 images/ 資料夾中)
        const images = [
            { url: './images/image_1.jpg', title: '本地測試圖 一' },
            { url: './images/image_2.jpg', title: '本地測試圖 二' },
            { url: './images/image_3.jpg', title: '本地測試圖 三' },
            { url: './images/image_4.jpg', title: '本地測試圖 四' }
        ];

        let currentImageIndex = 0;
        const transitionDurationMs = 300; // 墨水暈開/散去時間 (CSS控制)
        const transitionHoldMs = 50; // 圖片替換時保持黑幕的時間 (JS控制)
        const contentFadeInMs = 800; // 新內容淡入時間 (讓畫面更優雅)

        const imageContainer = document.getElementById('image-container');
        const transitionOverlay = document.getElementById('transition-overlay');
        const nextImageButton = document.getElementById('next-image-btn');
        const titleElement = imageContainer.querySelector('h1');
        let isTransitioning = false;

        /**
         * 執行圖片轉場效果，模擬水墨暈染的邏輯。
         */
        const transitionImage = () => {
            if (isTransitioning) return;
            isTransitioning = true;
            
            // 步驟 1: 墨水暈開覆蓋螢幕 (黑幕淡入)
            transitionOverlay.style.opacity = '1';
            transitionOverlay.style.pointerEvents = 'auto';
            nextImageButton.disabled = true; // 禁用按鈕防止重複點擊

            // 設置圖片容器為透明，準備更換內容，並讓其在轉場後優雅淡入
            imageContainer.style.opacity = '0'; 

            setTimeout(() => {
                // 步驟 2: 墨水完全覆蓋時，悄悄地更換內容 (換圖)
                currentImageIndex = (currentImageIndex + 1) % images.length;
                const nextImage = images[currentImageIndex];

                // 更新背景圖片和標題
                imageContainer.style.backgroundImage = `url('${nextImage.url}')`;
                titleElement.textContent = nextImage.title;
                titleElement.style.animation = 'none'; // 重設動畫
                void titleElement.offsetWidth; // 觸發重繪
                titleElement.style.animation = null; // 重新套用動畫

                // 步驟 3: 墨水散去露出新內容 (黑幕淡出)
                setTimeout(() => {
                    transitionOverlay.style.opacity = '0';
                    
                    // 步驟 4: 新圖片優雅淡入，並啟用按鈕
                    setTimeout(() => {
                        imageContainer.style.opacity = '1'; // 內容淡入
                        nextImageButton.disabled = false;
                        isTransitioning = false;
                        transitionOverlay.style.pointerEvents = 'none';
                    }, transitionDurationMs); // 等待黑幕完全散去

                }, transitionHoldMs); // 保持黑幕的短暫時間

            }, transitionDurationMs); // 等待淡入完成
        };

        // 綁定按鈕點擊事件
        nextImageButton.addEventListener('click', transitionImage);

        // 初始化：設置轉場層的 transition duration
        transitionOverlay.style.transitionDuration = `${transitionDurationMs}ms`;

    </script>
</body>
</html>